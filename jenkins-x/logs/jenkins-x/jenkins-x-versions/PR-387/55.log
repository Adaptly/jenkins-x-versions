Step: build-step-credential-initializer-kwvkf:

{"level":"warn","ts":1565292256.0304832,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1565292256.030953,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-working-dir-initializer-6ssbc:

{"level":"warn","ts":1565292256.611841,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1565292256.613099,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source\""}
Step: build-step-place-tools:

Step: build-step-git-source-jenkins-x-jenkins-x-versions-pr-4mjck:

{"level":"warn","ts":1565292258.681082,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1565292259.9488935,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/jenkins-x/jenkins-x-versions @ e397fc1520b958e99b2c050f2244a77ef1f68cde in path /workspace/source"}
Step: build-step-git-merge:

Warning failed to load version: failed to parse version -dev+9e73adc0b: No Major.Minor.Patch elements found
time="2019-08-08T19:24:20Z" level=info msg="got "
Using SHAs from PULL_REFS=master:8204db3369a083dc5bb5f6eafb4aeb78a0cb2b03,387:e397fc1520b958e99b2c050f2244a77ef1f68cde
ran git fetch --unshallow origin e397fc1520b958e99b2c050f2244a77ef1f68cde: 8204db3369a083dc5bb5f6eafb4aeb78a0cb2b03: in 
ran git checkout master in 
ran git reset --hard 8204db3369a083dc5bb5f6eafb4aeb78a0cb2b03 in 
ran clean --force -d . in 
ran git merge e397fc1520b958e99b2c050f2244a77ef1f68cde in 
Step: build-step-runci:

+ export GH_USERNAME=*************-test
+ GH_USERNAME=*************-test
+ export GH_OWNER=cb-kubecd
+ GH_OWNER=cb-kubecd
++ ** step credential -s *************-test-github
+ export GH_CREDS_PSW=****************************************
+ GH_CREDS_PSW=****************************************
++ ** step credential -s test-jenkins-user
+ export JENKINS_CREDS_PSW=************
+ JENKINS_CREDS_PSW=************
++ ** step credential -k bdd-credentials.json -s bdd-secret -f sa.json
+ export GKE_SA=sa.json
+ GKE_SA=sa.json
+ export BUILD_NUMBER=
+ BUILD_NUMBER=
+ JX_HOME=/tmp/**home
+ KUBECONFIG=/tmp/**home/config
+ mkdir -p /tmp/**home
+ ** --version
2.0.574
+ ** step git credentials
Generated Git credentials file /builder/home/git/credentials
+ gcloud auth activate-service-account --key-file sa.json
Activated service account credentials for: [*************@*************2.iam.gserviceaccount.com]
+ git config --global --add user.name JenkinsXBot
+ git config --global --add user.email jenkins-x@googlegroups.com
+ echo 'running the BDD tests with JX_HOME = /tmp/**home'
running the BDD tests with JX_HOME = /tmp/**home
+ ** step bdd --use-revision --version-repo-pr --versions-repo https://github.com/jenkins-x/jenkins-x-versions.git --config **/bdd/gitops/cluster.yaml --gopath /tmp --git-provider=github --git-username *************-test --git-owner cb-kubecd --git-api-token **************************************** --default-*****-password ************ --no-delete-app --no-delete-repo --tests install --tests test-create-spring
has 0 post create cluster commands
found git revision e397fc1520b958e99b2c050f2244a77ef1f68cde: branch PR-387
using versions git repo https://github.com/jenkins-x/jenkins-x-versions.git and ref e397fc1520b958e99b2c050f2244a77ef1f68cde

Creating cluster pr-387-55-gitops-gkebdd
loaded version 2.0.936 from Makefile in directory 
running command: ** create cluster gke --vault --gitops --project-id=*************2 -m=n1-standard-2 --min-num-nodes=3 --max-num-nodes=5 -z=europe-west1-c --skip-login --cluster-name pr-387-55-gitops-gkebdd --batch-mode --version 2.0.936 --labels cluster=gitops-gkebdd,branch=pr-387 --git-provider-url https://github.com --versions-repo https://github.com/jenkins-x/jenkins-x-versions.git --versions-ref e397fc1520b958e99b2c050f2244a77ef1f68cde --git-username *************-test --environment-git-owner cb-kubecd --git-api-token **************¬ --default-*****-password **************¬
? Configured project id: *************2
Updated property [core/project].
? Configured cluster name: pr-387-55-gitops-gkebdd
? Configured to machine type: n1-standard-2
? Configured to minimum number of nodes: 3
? Configured to maximum number of nodes: 5
Creating cluster...
WARNING: In June 2019, node auto-upgrade will be enabled by default for newly created clusters and node pools. To disable it, use the `--no-enable-autoupgrade` flag.
WARNING: Starting in 1.12, new clusters will have basic authentication disabled by default. Basic authentication can be enabled (or disabled) manually using the `--[no-]enable-basic-auth` flag.
WARNING: Starting in 1.12, new clusters will not have a client certificate issued. You can manually enable (or disable) the issuance of the client certificate using the `--[no-]issue-client-certificate` flag.
WARNING: Currently VPC-native is not the default mode during cluster creation. In the future, this will become the default mode and can be disabled using `--no-enable-ip-alias` flag. Use `--[no-]enable-ip-alias` flag to suppress this warning.
WARNING: Starting in 1.12, default node pools in new clusters will have their legacy Compute Engine instance metadata endpoints disabled by default. To create a cluster with legacy instance metadata endpoints disabled in the default node pool, run `clusters create` with the flag `--metadata disable-legacy-endpoints=true`.
WARNING: Your Pod address range (`--cluster-ipv4-cidr`) can accommodate at most 1008 node(s). 
This will enable the autorepair feature for nodes. Please see https://cloud.google.com/kubernetes-engine/docs/node-auto-repair for more information on node autorepairs.
Creating cluster pr-387-55-gitops-gkebdd in europe-west1-c...
..........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................done.
Created [https://container.googleapis.com/v1/projects/*************2/zones/europe-west1-c/clusters/pr-387-55-gitops-gkebdd].
To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/europe-west1-c/pr-387-55-gitops-gkebdd?project=*************2
kubeconfig entry generated for pr-387-55-gitops-gkebdd.
NAME                     LOCATION        MASTER_VERSION  MASTER_IP       MACHINE_TYPE   NODE_VERSION   NUM_NODES  STATUS
pr-387-55-gitops-gkebdd  europe-west1-c  1.12.8-gke.10   35.240.122.225  n1-standard-2  1.12.8-gke.10  3          RUNNING
Initialising cluster ...
Setting the docker registry organisation to *************2 in the TeamSettings
Git configured for user: JenkinsXBot and email jenkins-x@googlegroups.com
helm installed and configured
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD
WARNING: failed to create system vault in namespace ** due to no "**-vault-pr-387-55-git" vault found in namespace "**"

Note: this loadbalancer will fail to be provisioned if you have insufficient quotas, this can happen easily on a GKE free account.
To view quotas run: gcloud compute project-info describe
Waiting for external loadbalancer to be created and update the nginx-ingress-controller service in kube-system namespace
External loadbalancer created

Waiting to find the external host name of the ingress controller Service in namespace kube-system with name **ing-nginx-ingress-controller
No domain flag provided so using default 34.76.243.52.nip.io to generate Ingress rules
nginx ingress controller installed and configured
? Configured to use long term logs storage: No
Installing vault-operator...
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD
Namespace ** created 

vault-operator addon succesfully installed.
Creating new system vault
Updated property [core/project].
Unable to find service account pr-387-55-gitops-vt, checking if we have enough permission to create
Creating service account pr-387-55-gitops-vt
Assigning role roles/storage.objectAdmin
Assigning role roles/cloudkms.*****
Assigning role roles/cloudkms.cryptoKeyEncrypterDecrypter
Downloading service account key
GCS bucket **-vault-pr-387-55-git-bucket was created for Vault backend
Creating Vault...
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD
Vault **-vault-pr-387-55-git created in cluster pr-387-55-gitops
Exposing Vault...
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
From https://github.com/jenkins-x/jenkins-x-versions
 * branch            e397fc1520b958e99b2c050f2244a77ef1f68cde -> FETCH_HEAD

job.batch "exposecontroller" deleted
configmap "exposecontroller" deleted
serviceaccount "exposecontroller" deleted
role.rbac.authorization.k8s.io "exposecontroller" deleted
rolebinding.rbac.authorization.k8s.io "exposecontroller" deleted
Ingress rules recreated
Vault **-vault-pr-387-55-git exposed
System vault created named **-vault-pr-387-55-git in namespace **.
Set up a Git username and API token to be able to perform CI/CD
Select the CI/CD pipelines Git server and user
Setting the pipelines Git server https://github.com and user name *************-test.
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with revision e397fc1520b958e99b2c050f2244a77ef1f68cde to /builder/home/.**/jenkins-x-versions
error: Server does not allow request for unadvertised object e397fc1520b958e99b2c050f2244a77ef1f68cde
ERROR: Error: Command failed  git fetch origin e397fc1520b958e99b2c050f2244a77ef1f68cde
ERROR: error creating cluster cloning the ** versions repo: failed to git fetch origin e397fc1520b958e99b2c050f2244a77ef1f68cde for repo: https://github.com/jenkins-x/jenkins-x-versions.git in dir /builder/home/.**/jenkins-x-versions: exit status 128
error: cloning the ** versions repo: failed to git fetch origin e397fc1520b958e99b2c050f2244a77ef1f68cde for repo: https://github.com/jenkins-x/jenkins-x-versions.git in dir /builder/home/.**/jenkins-x-versions: exit status 128
ERROR: Error: Command failed  ** create cluster gke --vault --gitops --project-id=*************2 -m=n1-standard-2 --min-num-nodes=3 --max-num-nodes=5 -z=europe-west1-c --skip-login --cluster-name pr-387-55-gitops-gkebdd --batch-mode --version 2.0.936 --labels cluster=gitops-gkebdd,branch=pr-387 --git-provider-url https://github.com --versions-repo https://github.com/jenkins-x/jenkins-x-versions.git --versions-ref e397fc1520b958e99b2c050f2244a77ef1f68cde --git-username *************-test --environment-git-owner cb-kubecd --git-api-token **************¬ --default-*****-password **************¬
error: exit status 1
